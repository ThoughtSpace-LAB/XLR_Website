---
import Layout from '~/layouts/Layout.astro';
import LandingPage from '~/components/LandingPage.astro';
import MainPage from '~/components/MainPage.astro';
import FeaturePage from '~/components/FeaturePage.astro';
import MoonPage from '~/components/MoonPage.astro';
import PricePage from '~/components/PricePage.astro';
import FooterPage from '~/components/FooterPage.astro';
import '~/styles/feature-text.css';


const metadata = {
  title: 'SERENA — Your Personal Oracle App',
  description: 'SERENA provides clarity, answers, and guidance through intuitive prompts and personalized insights.',
  ignoreTitleTemplate: true,
};
---

<Layout metadata={metadata}>    
  <div class="relative bg-black flex flex-col text-white font-serena cursor-none">
    
    <!-- Section 1: Landing Page / Hero -->
    <LandingPage />

    <!-- Section 2: Main Page with Sticky Scroll -->
    <MainPage />

    <!-- Section 3: How It Works (Astrology Chatbot UI) -->
    <FeaturePage />

    <!-- Section 4: What Will Be Seen (Moon Page) -->
    <MoonPage />

    <!-- Section 5: Registration & Pricing -->
    <PricePage />

    <!-- Section 6: Footer -->
    <FooterPage />
    
    <div 
      id="custom-cursor" 
      class="pointer-events-none fixed top-0 left-0 w-3 h-3 bg-white rounded-full mix-blend-luminosity"
      style="z-index: 2147483647; will-change: transform; transition: opacity 0.05s ease;"
    ></div>

    <script>
      const cursor = document.getElementById('custom-cursor');
      
      if (cursor) {
        let mouseX = -100;
        let mouseY = -100;
        let isVisible = false;

        // 初始隐藏
        cursor.style.opacity = '0';

        const updateCursor = (e: MouseEvent) => {
          mouseX = e.clientX;
          mouseY = e.clientY;

          // 首次移动时显示
          if (!isVisible) {
            isVisible = true;
            // @ts-ignore
            cursor.style.opacity = '1';
          }
        }

        const animate = () => {
          // @ts-ignore
          if (isVisible && cursor) {
            cursor.style.transform = `translate3d(${mouseX}px, ${mouseY}px, 0) translate(-50%, -50%)`;
          }
          requestAnimationFrame(animate);
        };

        window.addEventListener('mousemove', updateCursor, { passive: true });
        
        // 页面可见性处理
        document.addEventListener('mouseleave', () => {
          isVisible = false;
          cursor.style.opacity = '0';
        });

        window.addEventListener('pageshow', () => {
          document.documentElement.style.cursor = 'none';
        });

        animate();
      }
    </script>
  </div>
</Layout>

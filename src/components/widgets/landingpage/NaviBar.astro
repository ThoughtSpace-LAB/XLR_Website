---
import logoIcon from '~/assets/icons/LOGO.svg?url';
---

<!-- 顶部导航栏：固定定位，白色半透明背景，带边框和阴影 -->
<div class="w-full px-4 py-7 md:px-8 absolute top-0 z-20 flex justify-center">
  <div id="nav-container" class="w-full max-w-4xl h-14 relative opacity-95 bg-white/10 backdrop-blur-xl rounded-[28px] shadow-lg outline outline-1 outline-offset-[-1px] outline-white/25 transition-all duration-500 ease-in-out overflow-hidden">
    <!-- 导航内容区：水平排列，左右两侧对齐 -->
    <div class="w-full h-14 flex justify-between items-center px-6 md:px-12">
      <!-- 左侧：Logo 区域 -->
      <div class="flex items-center gap-3">
        <img src={logoIcon} alt="Logo" class="h-6 w-6 object-contain" />
        <span class="brand-logo-letter">SERENA</span>
      </div>
      
      <!-- 右侧：导航链接区域 -->
      <div class="hidden md:flex justify-center items-center gap-16">
        <a href="#feature" class="brand-navi-letter hover:underline">FEATURE</a>
        <a href="#price" class="brand-navi-letter hover:underline">PRICE</a>
        <a href="#certification" class="brand-navi-letter hover:underline">CERTIFICATION</a>
        <button class="w-24 h-9 flex justify-center items-center bg-black/80 rounded-full shadow-[inset_0px_2px_4px_0px_rgba(0,0,0,0.05)] hover:bg-white/20 hover:outline hover:outline-white transition-all">
          <span class="text-center brand-navi-letter">LOG IN</span>
        </button>
      </div>

      <!-- 移动端菜单按钮 -->
      <button id="mobile-menu-btn" class="md:hidden w-9 h-9 flex justify-center items-center bg-white/20 shadow-[inset_0px_2px_4px_0px_rgba(255,255,255,0.5)] rounded-full z-50">
        <span class="text-white text-sm" id="menu-icon">☰</span>
      </button>
    </div>

    <!-- 移动端展开菜单内容 -->
    <div id="mobile-menu" class="w-full hidden md:hidden flex flex-col items-center justify-center pt-2 pb-8 transition-all duration-500 opacity-0">
      <span class="flex text-white/80 text-sm tracking-widest items-center font-light">Stay Tuned</span>
    </div>
  </div>
</div>

<script>
  const setupMobileMenu = () => {
    const btn = document.getElementById('mobile-menu-btn');
    const menu = document.getElementById('mobile-menu');
    const container = document.getElementById('nav-container');
    const icon = document.getElementById('menu-icon');
    
    if (!btn || !menu || !container || !icon) return;

    let isOpen = false;

    btn.addEventListener('click', () => {
      isOpen = !isOpen;
      
      if (isOpen) {
        // Expand container
        container.classList.remove('h-14');
        container.classList.add('h-30');
        
        // Show menu content
        menu.classList.remove('hidden');
        // Force reflow
        menu.offsetHeight;
        menu.classList.add('opacity-100');
        menu.classList.remove('opacity-0');
        
        icon.textContent = '✕';
      } else {
        // Collapse container
        container.classList.add('h-14');
        container.classList.remove('h-30');
        
        // Hide menu content
        menu.classList.remove('opacity-100');
        menu.classList.add('opacity-0');
        
        icon.textContent = '☰';
        
        setTimeout(() => {
          if (!isOpen) menu.classList.add('hidden');
        }, 500);
      }
    });
  };

  // Initial setup
  setupMobileMenu();
  // Handle view transitions if applicable
  document.addEventListener('astro:after-swap', setupMobileMenu);
</script>

<style>
  /* Navi Bar样式 */
  .brand-logo-letter {
    font-family: 'Arimo', sans-serif;
    color: rgba(255, 255, 255, 1);
    font-size: 0.7rem; /* 12px */
    line-height: 0.8rem; /* 16px */
    font-weight: 600;
    letter-spacing: 0.8px;
  }

  .brand-navi-letter {
    font-family: 'Arimo', sans-serif;
    color: rgba(255, 255, 255, 0.7);
    font-size: 0.8rem; /* 12px */
    line-height: 0.8rem; /* 16px */
    font-weight: 500;
    letter-spacing: 0.4px;
  }
</style>